feature: VIEW_PRODUCT
scenario: View product details

flow:
  - steps:
      - action: capture_product_details
        parameters:
          product_name: ${PRODUCT_1}
          save_as: selected_product

      - action: open_product
        parameters:
          product_name: ${PRODUCT_1}

  - assertions:
      - product_page_loaded:
          - name: product_page_loaded
            waitForSelector: waitForSelector

      - product_details:
          - name: product_name
            toHaveText: ${PRODUCT_1}

          - name: product_description
            toBeVisible: true

          - name: product_price
            toBeVisible: true

          - name: add_to_cart_button
            toBeVisible: true

          - name: back_to_shop_button
            toBeVisible: true

      - product_details_match:
          context_key: selected_product
